#!/bin/bash
# Quick test commands reference

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                    TEST SUITE QUICK START                      â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Check Ollama
if curl -s http://localhost:11434/api/tags > /dev/null 2>&1; then
    echo "âœ… Ollama detected - Full test suite available"
else
    echo "âš ï¸  Ollama not running - LLM tests will be skipped"
    echo "   Start with: ollama serve"
    echo "   Install from: https://ollama.com"
fi

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                      QUICK COMMANDS                            â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸš€ RECOMMENDED (smart auto-detect):"
echo "   python run_tests.py"
echo ""
echo "âš¡ FAST (unit tests only, <10s):"
echo "   python run_tests.py --fast"
echo "   pytest tests/ -v -k 'not llm_client'"
echo ""
echo "ğŸ“Š WITH COVERAGE:"
echo "   python run_tests.py --coverage"
echo "   pytest tests/ --cov=rag --cov=database --cov-report=term-missing"
echo ""
echo "ğŸ¯ SPECIFIC FILE:"
echo "   python run_tests.py --file retriever"
echo "   pytest tests/test_retriever.py -v"
echo ""
echo "ğŸ”¬ SINGLE TEST:"
echo "   pytest tests/test_retriever.py::test_severity_ranking -v"
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                      TEST FILES                                â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "tests/"
echo "â”œâ”€â”€ test_knowledge_graph.py    (1 test, <1s)"
echo "â”œâ”€â”€ test_cwe_enrichment.py     (1 test, <1s)"
echo "â”œâ”€â”€ test_normalizer.py          (5 tests, ~2s)"
echo "â”œâ”€â”€ test_retriever.py           (8 tests, ~5s) â­ NEW"
echo "â”œâ”€â”€ test_llm_client.py          (9 tests, ~30s, requires Ollama) â­ NEW"
echo "â””â”€â”€ test_end_to_end.py          (2 tests, ~3s)"
echo ""
echo "Total: 26 tests (~40s with Ollama)"
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                    TROUBLESHOOTING                             â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âŒ Import errors:"
echo "   export PYTHONPATH=\$PWD:\$PYTHONPATH"
echo ""
echo "âŒ Ollama connection refused:"
echo "   ollama serve  # Run in separate terminal"
echo "   pytest tests/ -v -k 'not llm_client'  # Skip LLM tests"
echo ""
echo "âŒ Tests timeout:"
echo "   pytest tests/ -v --timeout=300"
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                      CI/CD USAGE                               â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "# GitHub Actions / Jenkins"
echo "pytest tests/ -v -x -k 'not llm_client' --junitxml=test-results.xml"
echo ""
echo "# Pre-commit hook"
echo "pytest tests/ -v --tb=short -k 'not llm_client'"
echo ""
